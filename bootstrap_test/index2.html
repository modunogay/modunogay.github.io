<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Bootstrap Sample</title>
</head>

<body>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/jquery-treegrid/0.2.0/css/jquery.treegrid.min.css"
		rel="stylesheet">
	<link href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css" rel="stylesheet">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-treegrid/0.2.0/js/jquery.treegrid.min.js"></script>
	<script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js"></script>
	<script
		src="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/treegrid/bootstrap-table-treegrid.min.js"></script>

	<table id="table"></table>

	<script>
		var $table = $('#table')

		$(function () {
			$table.bootstrapTable({
				url: 'json/treegrid.json',
				striped: true,
				sidePagination: 'server',
				idField: 'id',
				showColumns: true,
				columns: [
					{
						field: 'ck',
						checkbox: true
					},
					{
						field: 'name',
						title: '名称'
					},
					{
						field: 'status',
						title: '状态',
						sortable: true,
						align: 'center',
						formatter: 'statusFormatter'
					},
					{
						field: 'permissionValue',
						title: '权限值'
					}
				],
				treeShowField: 'name',
				parentIdField: 'pid',
				onPostBody: function () {
					var columns = $table.bootstrapTable('getOptions').columns

					if (columns && columns[0][1].visible) {
						$table.treegrid({
							treeColumn: 1,
							onChange: function () {
								$table.bootstrapTable('resetWidth')
							}
						})
					}
				}
			})
		})

		function typeFormatter(value, row, index) {
			if (value === 'menu') {
				return '菜单'
			}
			if (value === 'button') {
				return '按钮'
			}
			if (value === 'api') {
				return '接口'
			}
			return '-'
		}

		function statusFormatter(value, row, index) {
			if (value === 1) {
				return '<span class="label label-success">正常</span>'
			}
			return '<span class="label label-default">锁定</span>'
		}
	</script>
</body>

<script>

</script>

</html>