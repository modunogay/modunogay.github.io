<!DOCTYPE html>
<html lang="ja">

<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-166859192-2"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-166859192-2', {
			'custom_map': {
				'dimension1': 'USER_VERSION'
			}
		});
		gtag('event', 'VERSION', {
			'USER_VERSION': 202007212306
		});
	</script>
	<meta charset="UTF-8" name="viewport"
		content="width=device-width, initial-scale=1.0, maximum-scale=2.0, minimum-scale=1.0">
	<title>DIYレシピテンプレサイト</title>
	<!--Twitter metaタグ-->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@modunogay" />
	<meta property="og:url" content="https://modunogay.github.io/DIY_IMAGE/index.html" />
	<meta property="og:title" content="DIYレシピテンプレ作成サイト" />
	<meta property="og:description" content="あつまれどうぶつの森のDIYレシピのテンプレや一覧を作れるサイト" />
	<meta property="og:image" content="https://modunogay.github.io/DIY_IMAGE/image/CARD_DIY_IMAGE.png" />
	<meta name="description" content="あつまれどうぶつの森のDIYレシピのテンプレや一覧を作れるサイト">
	<!--Twitter metaタグ ここまで-->
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
		integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
		integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous">
		</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
		integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous">
		</script>
	<link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome-animation/0.2.1/font-awesome-animation.css"
		type="text/css" media="all" />
	<script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>
	<script src="https://code.createjs.com/1.0.0/easeljs.min.js"></script>
	<script src="https://code.createjs.com/1.0.0/preloadjs.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
	<script src="./js/imageDIY.js?202007212306"></script>
	<script src="./js/Tweet.js?202007212306"></script>
	<script type="text/javascript" src="../Common/js/lz-string.js"></script>
	<link rel="stylesheet" type="text/css" href="./css/override.css">
</head>

<!--
　　　　　　　　 ,-､　　　　　　　　　　　　  ,.-､
　　　　　　　 /:::::＼　　　　　　　　　  ／:::::ヽ
　　　　　　　/::::::::::::;ゝ--──-- ､._/::::::::|
　　　　　　 /,.-‐''"´ 　　　　　　　　 ＼::::::::|
　　　　　／　 　　　　　　　　　　　　　　ヽ､::::|
　　　　/　　　　●　　　 　 　 　 　 　 　 　 ヽ|
　　 　 l　　　, , ,　　 　 　 　 　 　 ●　　　 　 l
　　　 |　　　 　　　　 (_人__丿　 　　　　､､､　　|
　 　 　l　　　　　　　　　　　　　　　　　　　 　 l
　　　　` ､　　　　　　　　 　 　 　 　 　 　 　 /
　　　　　　`ｰ ､__　　　 　 　 　　　　　　　／
　　　　　　　　　/`'''ｰ‐‐──‐‐‐┬'''""´

	なるほどわからん
-->

<script>
	var tmp = localStorage.getItem("DIY")
</script>


<body>
	<nav class="navbar navbar-dark bg-dark">
		<span class="navbar-brand">DIYレシピテンプレサイト</span>
	</nav>

	<div class="container">
		<div class="row my-3">
			<div class="col-12">
				<p>
					ここは<a href="../DIY/index.html">DIYレシピチェッカー</a>でチェックした情報を用い画像に出力するサイトです。
				</p>
				<h3 class="border-bottom mt-3">基本的な使い方</h3>
				<a href="../DIY/index.html">DIYレシピチェッカー</a>でアイテムを選択します。<br>
				<img src="./image/image_1.png" width="80%" class="img-thumbnail mx-auto d-block my-2" loading="lazy"
					style="max-width: 500px;"><br>
				すると対応するアイテムに色が付きます。<br>
				<img src="./image/image_3.png" width="80%" class="img-thumbnail mx-auto d-block my-2" loading="lazy"
					style="max-width: 500px;">
				<h3 class="border-bottom mt-3">iPhone</h3>
				<p class="my-1">画像から、<span class="mark">長押し</span>で保存してください。</p>
				<h3 class="border-bottom mt-3">Android・PC</h3>
				<p class="my-1">ページ下部から、<span class="mark">ダウンロードボタン</span>で保存してください。</p>
			</div>
			<div class="col-12">
				<p>
					<button class="btn col-12 btn-outline-secondary" type="button" data-toggle="collapse"
						data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
						Samsung ブラウザを使用している方
					</button>
				</p>
				<div class="collapse" id="collapseExample">
					<div class="card card-body">
						Samsung ブラウザを使用しているとダウンロード出来ない場合があります。<br>
						そのような時は下記画像のように設定を変更してください。
						<img src="./image/image_2.png" width="80%" class="img-thumbnail mx-auto d-block my-2"
							loading="lazy" style="max-width: 500px;">
						<span class="mark">自動でダウンロードされます。</span>通知バーをお確かめください。
					</div>
				</div>

			</div>
			<div class="col-12 my-2">
				<div class="my-5 text-center">
					状態：<span id="message">選択待ち</span><br>
					<button class="btn btn-outline-primary my-3 btn-sm"
						onclick="window.location.reload(true);">更新</button>
					<div id="selectImageNum">
						<div class="row">
							<div class="card mx-auto" style="width:15rem;">
								<img class="card-img-top" id="cardImage" src="./image/DIY_ピンク.png" alt="Card image cap"
									style="width: 10rem; margin: auto;">
								<div class="card-body">
									<h5 class="card-title">取得済みの色を変更</h5>
									<p class="card-text" id="cardText">デフォルト</p>
									<div class="btn-group btn-group-toggle btn-block" data-toggle="buttons">
										<label class="btn btn-secondary active">
											<input type="radio" name="options" id="pink-option1" checked
												onchange="setColor(1)"> デフォルト
										</label>
										<label class="btn btn-secondary">
											<input type="radio" name="options" id="pink-option2" onchange="setColor(2)">
											真っ暗
										</label>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="btn-block">
								<button type="button" class="btn btn-outline-primary btn-lg" onclick="setBack()">
									<i class="far fa-image"></i><br>
									画像を作成！
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-12" id="Image">
				<div class="row">
					<div class="col-12 d-flex">
						<div>
							<img class="img-thumbnail" style="object-fit: contain;" id="canvasImage1">
						</div>
						<div>
							<img class="img-thumbnail" style="object-fit: contain;" id="canvasImage2">
						</div>
						<div>
							<img class="img-thumbnail" style="object-fit: contain;" id="canvasImage3">
						</div>
						<div>
							<img class="img-thumbnail" style="object-fit: contain;" id="canvasImage4">
						</div>
					</div>
				</div>
				<div class="col-12" id="iPhone-none-add">
					<div class="row">
						<div class="btn-group col-12" role="group">
							<button class="btn btn-sm btn-outline-primary p-1" id="download1"
								style="display: none;">1枚目<br><span class="font-download">ダウンロード</span></button>
							<button class="btn btn-sm btn-outline-primary p-1" id="download2"
								style="display: none;">2枚目<br><span class="font-download">ダウンロード</span></button>
							<button class="btn btn-sm btn-outline-primary p-1" id="download3"
								style="display: none;">3枚目<br><span class="font-download">ダウンロード</span></button>
							<button class="btn btn-sm btn-outline-primary p-1" id="download4"
								style="display: none;">4枚目<br><span class="font-download">ダウンロード</span></button>
						</div>
					</div>
				</div>
				<div class="col-12 iPhone-none">
					<h3 class="border-bottom mt-3">失敗する方向け</h3>
				</div>
				<div class="col-12 iPhone-none">
					<div class="row">
						<div class="btn-group col-12 " role="group">
							<button class="btn btn-sm btn-outline-primary p-1" id="download1_dev"
								style="display: none;">1枚目<br><span class="font-download">ダウンロード</span></button>
							<button class="btn btn-sm btn-outline-primary p-1" id="download2_dev"
								style="display: none;">2枚目<br><span class="font-download">ダウンロード</span></button>
							<button class="btn btn-sm btn-outline-primary p-1" id="download3_dev"
								style="display: none;">3枚目<br><span class="font-download">ダウンロード</span></button>
							<button class="btn btn-sm btn-outline-primary p-" id="download4_dev"
								style="display: none;">4枚目<br><span class="font-download">ダウンロード</span></button>
						</div>
					</div>
				</div>
			</div>
			<!-- modal -->
			<!-- triger -->
			<div class="col-12">
				<div class="row my-5 mx-auto text-center">
					<div class="col m-2">
						<button type="button" class="btn btn-primary btn-lg TwitterColor" data-toggle="modal"
							data-target="#exampleModal" onClick="Tweet_Open_Modal()">
							<i class="fab fa-twitter mr-2"></i>ツイート
						</button>
					</div>
				</div>
			</div>

			<!-- modal本体 -->
			<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
				aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">URLを発行</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<!-- コピー用 text box -->
							<div class="form-group">
								<label for="url">URLを発行します</label>
								<div class="input-group">
									<input type="text" class="form-control" id="Tweet_URL_Input" placeholder="URL発行中・・・"
										value="URL発行中・・・" readonly="readonly">
									<div class="input-group-append">
										<button class="btn btn-outline-secondary" type="button" id="Tweet_URL_Copy"
											value="URLをコピー" data-clipboard-target="#Tweet_URL_Input"><i
												class="fas fa-copy mr-2"></i>コピー！</button>
									</div>
								</div>
								<small id="caption" class="form-text text-muted">右のボタンをクリックするとコピーできます</small>
							</div>

							<div class="my-2 text-center">
								<button class="btn btn-primary btn-lg TwitterColor" onclick="Tweet_Popup()">
									<i class="fab fa-twitter mr-2"></i>でツイート</button>
							</div>

							<div class="accordion" id="accordionExample">
								<!-- tweet text setting -->
								<div class="card">
									<div class="card-header" id="headingOne">
										<h2 class="mb-0">
											<button class="btn btn-link btn-block text-left" type="button"
												data-toggle="collapse" data-target="#collapseOne" aria-expanded="true"
												aria-controls="collapseOne">
												ツイート内容を設定
											</button>
										</h2>
									</div>
									<div id="collapseOne" class="collapse" aria-labelledby="headingOne"
										data-parent="#accordionExample">
										<div class="card-body">
											<input type="checkbox" id="Twitter-Text-CB-1" onclick="Tweet_setCB_Text(1)">
											<label for="Twitter-Text-CB-1">
												配布可：<span id="Twitter-Text-1"></span>枚
											</label><br>
											<input type="checkbox" id="Twitter-Text-CB-2" onclick="Tweet_setCB_Text(2)">
											<label for="Twitter-Text-CB-2">
												取得済：<span id="Twitter-Text-2"></span>枚
											</label><br>
											<input type="checkbox" id="Twitter-Text-CB-3" onclick="Tweet_setCB_Text(3)">
											<label for="Twitter-Text-CB-3">
												未取得：<span id="Twitter-Text-3"></span>枚
											</label><br>
											<input type="checkbox" id="Twitter-Text-CB-4" onclick="Tweet_setCB_Text(4)">
											<label for="Twitter-Text-CB-4">
												コンプ率：<span id="Twitter-Text-4"></span>%
											</label><br>
										</div>
									</div>
								</div>

								<!-- tweet tags setting -->
								<div class="card">
									<div class="card-header" id="headingTwo">
										<h2 class="mb-0">
											<button class="btn btn-link btn-block text-left collapsed" type="button"
												data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false"
												aria-controls="collapseTwo">
												<i class="fas fa-hashtag mr-2"></i>ツイートするタグの設定
											</button>
										</h2>
									</div>
									<div id="collapseTwo" class="collapse" aria-labelledby="headingTwo"
										data-parent="#accordionExample">
										<div class="card-body">
											<input type="checkbox" id="Twitter-Tag-CB-1" onclick="Tweet_setCB_Tag(1)"
												value="DIYレシピチェッカー">
											<label for="Twitter-Tag-CB-1">
												#DIYレシピチェッカー
											</label><br>
											<input type="checkbox" id="Twitter-Tag-CB-2" onclick="Tweet_setCB_Tag(2)"
												value="あつ森">
											<label for="Twitter-Tag-CB-2">
												#あつ森
											</label><br>
											<input type="checkbox" id="Twitter-Tag-CB-3" onclick="Tweet_setCB_Tag(3)"
												value="あつ森交換">
											<label for="Twitter-Tag-CB-3">
												#あつ森交換
											</label><br>
											<input type="checkbox" id="Twitter-Tag-CB-4" onclick="Tweet_setCB_Tag(4)"
												value="DIYレシピ">
											<label for="Twitter-Tag-CB-4">
												#DIYレシピ
											</label><br>
											<input type="checkbox" id="Twitter-Tag-CB-5" onclick="Tweet_setCB_Tag(5)"
												value="DIYレシピ交換">
											<label for="Twitter-Tag-CB-5">
												#DIYレシピ交換
											</label><br>
											<input type="checkbox" id="Twitter-Tag-CB-6" onclick="Tweet_setCB_Tag(6)"
												value="レシピ交換">
											<label for="Twitter-Tag-CB-6">
												#レシピ交換
											</label>
										</div>
									</div>
								</div>

								<!-- tweet 画像 -->
								<div class="card">
									<div class="card-header" id="headingThree">
										<h2 class="mb-0">
											<button class="btn btn-link btn-block text-left" type="button"
												data-toggle="collapse" data-target="#collapseThree" aria-expanded="true"
												aria-controls="collapseThree">
												ツイートするの際の諸注意
											</button>
										</h2>
									</div>
									<div id="collapseThree" class="collapse show" aria-labelledby="headingThree"
										data-parent="#accordionExample">
										<div class="card-body">
											<img src="./image/image_4.png" width="80%"
												class="img-thumbnail mx-auto d-block" loading="lazy"
												style="max-width: 300px;"><br>
											<small id="caption"
												class="form-text text-muted">×ボタンを押すと画像が張れるようになります。</small>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">閉じる</button>
						</div>
					</div>
				</div>
			</div>
			<!-- modal end -->

			<div class="col-12">
				<div class="row mt-5 mx-auto text-center">
					<div class="col m-2">
						<button type="button" class="btn btn-primary btn-sm TwitterColor" onClick="DIYImageShare()">
							<i class="fab fa-twitter mr-2"></i>このサイトを拡散！
						</button>
					</div>
				</div>
			</div>

		</div>
	</div>

	<canvas width="1080" height=" 1920" id="myCanvas1" style="display:none;"></canvas>
	<canvas width="1080" height=" 1920" id="myCanvas2" style="display:none;"></canvas>
	<canvas width="1080" height=" 1920" id="myCanvas3" style="display:none;"></canvas>
	<canvas width="1080" height=" 2030" id="myCanvas4" style="display:none;"></canvas>

	<nav class="navbar navbar-dark bg-dark">
		<a class="text-white" href="../DataSource/index.html">データ提供元・ライセンス<br>プライバシーポリシー・免責事項</a>
	</nav>
</body>


<script>
	var elm = []
	var context = []
	$(function () {
		DIY = JSON.parse(tmp)

		//iphoneならダウンロードボタンを非表示に
		if (navigator.userAgent.indexOf("iPhone") > 0) {
			$('.iPhone-none').css('display', 'none');
			$("#iPhone-none-add").text("長押しで保存してください")
		}

		elm[1] = document.getElementById("myCanvas1")
		context[1] = elm[1].getContext("2d");
		elm[2] = document.getElementById("myCanvas2")
		context[2] = elm[2].getContext("2d");
		elm[3] = document.getElementById("myCanvas3")
		context[3] = elm[3].getContext("2d");
		elm[4] = document.getElementById("myCanvas4")
		context[4] = elm[4].getContext("2d");

		if (context[1] == null || context[2] == null || context[3] == null || context[4] == null) {
			alert("メモリが不足しています…。一度タスクキルをしてからもう一度お願い致します。")
		}

		var DD = new Date();

		for (i = 1; i <= 4; i++) {
			(function (i) {
				$(`#download${i}`).click(function () {
					let canvas = document.getElementById(`myCanvas${i}`);

					let link = document.createElement("a");
					link.href = canvas.toDataURL("image/png");

					link.download = DD.getFullYear() + "" + (DD.getMonth() + 1) + "" + DD.getDate() +
						"" + DD.getHours() + "" + DD.getMinutes() + "" + DD.getSeconds() + "" +
						`FTR_${i}.png`;
					link.click();
				});

				$(`#download${i}_dev`).click(function () {
					let canvas = document.getElementById(`myCanvas${i}`);

					let link = document.createElement("a");
					link.download = DD.getFullYear() + "" + (DD.getMonth() + 1) + "" + DD.getDate() +
						"" + DD.getHours() + "" + DD.getMinutes() + "" + DD.getSeconds() + "" +
						`FTR_${i}.png`;
					canvas.toBlob(function (blob) {
						console.log(blob)
						link.href = URL.createObjectURL(blob);
						link.click();
						URL.revokeObjectURL(link.href);
					});
				});
			}(i));
		}
	})
</script>

</html>